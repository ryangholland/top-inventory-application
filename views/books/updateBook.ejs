<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
  </head>
  <body>
    <h2><%= title %></h2>
    <%- include("../partials/errors.ejs") %>
    <form action="/books/<%= book.id %>/update" method="POST">
      <label for="title">Title: </label>
      <input
        type="text"
        name="title"
        id="title"
        value="<%= book.title %>"
        required
      />

      <label for="author">Author:</label>
      <select name="author_id" id="author" required>
        <option value="">-- Select Author --</option>
        <% authors.forEach(author => { %>
        <option value="<%= author.id %>" <%= author.id === book.author_id ? 'selected' : '' %> >
          <%= author.first_name %> <%= author.last_name %>
        </option>
        <% }); %>
      </select>

      <label for="genre">Genre:</label>
      <select name="genre_id" id="genre" required>
        <option value="">-- Select Genre --</option>
        <% genres.forEach(genre => { %>
        <option value="<%= genre.id %>" <%= genre.id === book.genre_id ? 'selected' : '' %>><%= genre.name %></option>
        <% }); %>
      </select>

      <label for="pages">Pages: </label>
      <input type="number" min="2" max="99999" name="pages" id="pages" value="<%= book.pages !== null ? book.pages : '' %>"  />
      <button type="submit">Submit</button>
    </form>
    <a href="/books">Back</a>
  </body>
</html>
